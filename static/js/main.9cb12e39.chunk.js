(this["webpackJsonprap-winds-aloft"]=this["webpackJsonprap-winds-aloft"]||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),a=n(18),s=n.n(a),o=(n(25),n(9)),l=n(2),d=(n(26),n.p+"static/media/MenuIcon.5493e055.svg"),j=n.p+"static/media/BackButton.93e6347d.svg",u=function(){var e=Object(l.g)(),t=Object(l.f)();return Object(c.jsx)("div",{children:"/"===e.pathname?Object(c.jsx)(o.b,{to:"/menu",children:Object(c.jsx)("img",{src:d,alt:"menu icon",className:"menu-icon"})}):Object(c.jsx)("button",{onClick:function(){return t.goBack()},children:Object(c.jsx)("img",{src:j,alt:"back button",className:"menu-icon"})})})},h=(n(32),n.p+"static/media/ForwardButton.fa4772a8.svg"),b=function(){var e=Object(l.f)();return Object(c.jsx)("ul",{className:"Menu",children:Object(c.jsxs)("li",{onClick:function(){return t="/about",void e.push(t);var t},children:[Object(c.jsx)("div",{children:"About"}),Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:h,alt:"forward button",className:"icon"})})]})})},f=(n(33),function(){return Object(c.jsxs)("div",{className:"About",children:[Object(c.jsx)("h1",{children:"About"}),Object(c.jsx)("h2",{children:"What it is"}),Object(c.jsxs)("p",{children:["Display a current winds aloft forecast from"," ",Object(c.jsx)("a",{href:"https://rucsoundings.noaa.gov/",target:"_blank",rel:"noopener",children:"rucsoundings.noaa.gov"}),"."]}),Object(c.jsx)("p",{children:"Your location is determined using your device's location service. The ground elevation and winds aloft forecast for your location are fetched from online services. The forecast data is cached on your device until the start of each hour, and refetched after that."}),Object(c.jsx)("h2",{children:"Future plans"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"Integrate map service to fine-tune location"}),Object(c.jsx)("li",{children:"Provide preference option to view metric or imperial units"}),Object(c.jsx)("li",{children:"Provide preference option for light or dark theme"}),Object(c.jsx)("li",{children:"Provide option to clear forecast cache"}),Object(c.jsx)("li",{children:'Provide option to "Save" app to device'})]}),Object(c.jsx)("h2",{children:"Contact"}),Object(c.jsx)("p",{children:"David Rose (doppler@gmail.com)"}),Object(c.jsx)("p",{children:Object(c.jsx)("a",{href:"https://facebook.com/doppler",target:"_blank",rel:"noopener",children:"Facebook"})})]})}),O=n(10),p=n.n(O),v=n(16),x=n(11),m=n.p+"static/media/Loading.1831e8a7.svg",g=function(e){var t=e.dir;return Object(c.jsxs)("svg",{viewBox:"0 0 512 512",height:"2em",width:"2em",children:[Object(c.jsx)("circle",{cx:"256",cy:"256",r:"237.32505032019532",fill:"hsl(210, 100%, 33%)",stroke:"hsl(210, 100%, 66%)",strokeWidth:"37.349899359609346"}),Object(c.jsx)("path",{d:" M 260.4 0 L 269.56814539771983 274.6749500197458 L 313.475583094649 335.1083534400135 L 256 512 L 198.52441690535102 335.1083534400135 L 242.43185460228014 274.6749500197458 L 251.6 0 Z",fill:"hsl(30, 100%, 50%)",transform:"rotate(".concat(t,", 256, 256)")})]})},w={latitude:0,longitude:0},k=function(){var e=Object(r.useState)(w),t=Object(x.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(0),s=Object(x.a)(a,2),o=s[0],l=s[1],d=Object(r.useState)(null),j=Object(x.a)(d,2),u=j[0],h=j[1],b=Object(r.useState)("Loading..."),f=Object(x.a)(b,2),O=f[0],k=f[1],N=function(e){i({latitude:Number(e.coords.latitude.toFixed(7)),longitude:Number(e.coords.longitude.toFixed(7))})};return Object(r.useEffect)((function(){navigator.geolocation.getCurrentPosition(N)}),[]),Object(r.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("cache")||"null");e&&e.hour>(new Date).getUTCHours()&&(h(e),l(e.elevation))}),[]),Object(r.useEffect)((function(){if(!o&&n.latitude){var e=new AbortController;return function(){var t=Object(v.a)(p.a.mark((function t(n){var c,r,i,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k("Determining location elevation..."),c=Object.entries({x:n.longitude,y:n.latitude,units:"Meters",output:"json"}).map((function(e){return e.join("=")})).join("&"),r="https://nationalmap.gov/epqs/pqs.php?".concat(c),t.next=6,fetch(r,{signal:e.signal});case 6:return i=t.sent,t.next=9,i.json();case 9:a=t.sent,l(a.USGS_Elevation_Point_Query_Service.Elevation_Query.Elevation),k(""),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0.name);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()(n),function(){return e.abort()}}}),[n,o]),Object(r.useEffect)((function(){if(!u&&o){var e=new AbortController;return function(){var t=Object(v.a)(p.a.mark((function t(n,c){var r,i,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k("Fetching winds aloft forecast data..."),r="https://weatherflow-dash.herokuapp.com/winds-aloft/".concat(n.latitude,"/").concat(n.longitude,"/").concat(c),t.next=5,fetch(r,{signal:e.signal});case 5:return i=t.sent,t.next=8,i.json();case 8:a=t.sent,h(a),sessionStorage.setItem("cache",JSON.stringify(a)),k(""),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error(t.t0.name);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()(n,o),function(){return e.abort()}}}),[n,o,u]),u?Object(c.jsxs)("div",{id:"winds-aloft-chart",children:[u.soundings.map((function(e,t){return Object(c.jsxs)("div",{className:"sounding",children:[Object(c.jsxs)("div",{children:[e.altitude.feetAGL," ft."]}),Object(c.jsxs)("div",{children:[e.windSpd.mph," mph"]}),Object(c.jsx)("div",{children:Object(c.jsx)(g,{dir:e.windDir})}),Object(c.jsxs)("div",{children:[e.windDir,"\xb0"]}),Object(c.jsxs)("div",{children:[e.temp.f,"\xb0F"]})]},t)})).reverse(),Object(c.jsxs)("div",{className:"footer",children:[u.header,Object(c.jsx)("br",{}),u.op40,Object(c.jsx)("br",{}),"Elevation: ",u.elevation,"m MSL"]})]}):Object(c.jsxs)("div",{className:"Loading-indicator",children:[Object(c.jsx)("h2",{children:O}),Object(c.jsx)("img",{src:m,alt:"Loading indicator",className:"Loading-indicator-svg"})]})};var N=function(){return Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("div",{className:"Header",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"Main",children:Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{path:"/about",children:Object(c.jsx)(f,{})}),Object(c.jsx)(l.a,{path:"/menu",children:Object(c.jsx)(b,{})}),Object(c.jsx)(l.a,{path:"/",children:Object(c.jsx)(k,{})})]})})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(N,{})}),document.getElementById("root")),S()}},[[35,1,2]]]);
//# sourceMappingURL=main.9cb12e39.chunk.js.map